{"version":3,"file":"getDropUidOffset.js","sourceRoot":"","sources":["../../src/dom/getDropUidOffset.ts"],"names":[],"mappings":";;;AAAA,qGAAqE;AACrE,oGAAoE;AACpE,gEAAgC;AAEhC,MAAM,gBAAgB,GAAG,CACvB,CAAiB,EACsB,EAAE;;IACzC,MAAM,SAAS,GAAG,CAAC,CAAC,aAAa,CAAC;IAClC,MAAM,iBAAiB,GAAG,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,aAAa,CAAC;IACnD,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA,iBAAiB,aAAjB,iBAAiB,uBAAjB,iBAAiB,CAAE,QAAQ,KAAI,EAAE,CAAC,CAAC;IAC/D,MAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC;IACzD,MAAM,MAAM,GAAG,QAAQ,CAAC,MAAM,CAC5B,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CACjB,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,sBAAsB,CAAC,IAAI,GAAG,GAAG,KAAK;QAC3D,CAAC,CAAC,IAAI,GAAG,CAAC;QACV,CAAC,CAAC,IAAI,EACV,CAAC,CACF,CAAC;IACF,MAAM,WAAW,GACf,MAAA,MAAA,iBAAiB,aAAjB,iBAAiB,uBAAjB,iBAAiB,CAAE,sBAAsB,0CAAE,sBAAsB,CAC/D,YAAY,CACb,0CAAG,CAAC,CAAmB,CAAC;IAC3B,MAAM,SAAS,GAAG,WAAW;QAC3B,CAAC,CAAC,IAAA,iBAAO,EAAC,WAAW,CAAC,CAAC,QAAQ;QAC/B,CAAC,CAAC,iBAAiB;YACnB,CAAC,CAAC,IAAA,+BAAqB,EACnB,CAAA,MAAA,IAAA,mCAAyB,EAAC,iBAAiB,CAAC,0CAAE,WAAW,KAAI,EAAE,CAChE;YACH,CAAC,CAAC,EAAE,CAAC;IACP,OAAO;QACL,SAAS;QACT,MAAM;KACP,CAAC;AACJ,CAAC,CAAC;AAEF,kBAAe,gBAAgB,CAAC","sourcesContent":["import getPageUidByPageTitle from \"../queries/getPageUidByPageTitle\";\nimport getPageTitleByHtmlElement from \"./getPageTitleByHtmlElement\";\nimport getUids from \"./getUids\";\n\nconst getDropUidOffset = (\n  d: HTMLDivElement\n): { parentUid: string; offset: number } => {\n  const separator = d.parentElement;\n  const childrenContainer = separator?.parentElement;\n  const children = Array.from(childrenContainer?.children || []);\n  const index = children.findIndex((c) => c === separator);\n  const offset = children.reduce(\n    (prev, cur, ind) =>\n      cur.classList.contains(\"roam-block-container\") && ind < index\n        ? prev + 1\n        : prev,\n    0\n  );\n  const parentBlock =\n    childrenContainer?.previousElementSibling?.getElementsByClassName(\n      \"roam-block\"\n    )?.[0] as HTMLDivElement;\n  const parentUid = parentBlock\n    ? getUids(parentBlock).blockUid\n    : childrenContainer\n    ? getPageUidByPageTitle(\n        getPageTitleByHtmlElement(childrenContainer)?.textContent || \"\"\n      )\n    : \"\";\n  return {\n    parentUid,\n    offset,\n  };\n};\n\nexport default getDropUidOffset;\n"]}
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const getBlockUidsReferencingBlock_1 = tslib_1.__importDefault(require("../queries/getBlockUidsReferencingBlock"));
const getDomRefs_1 = tslib_1.__importDefault(require("./getDomRefs"));
const getUids_1 = tslib_1.__importDefault(require("./getUids"));
const getReferenceBlockUid = (e, className) => {
    const parent = e.closest(".roam-block");
    if (!parent) {
        return "";
    }
    const { blockUid } = (0, getUids_1.default)(parent);
    const childRefs = (0, getBlockUidsReferencingBlock_1.default)(blockUid);
    const refs = childRefs.length ? childRefs : (0, getDomRefs_1.default)(blockUid);
    const index = Array.from(parent.getElementsByClassName(className)).findIndex((el) => el === e || el.contains(e));
    return refs[index];
};
exports.default = getReferenceBlockUid;
//# sourceMappingURL=getReferenceBlockUid.js.map
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.gatherActions = void 0;
const tslib_1 = require("tslib");
const submitActions_1 = tslib_1.__importDefault(require("./submitActions"));
const gatherActions = ({ node: { text, children = [], uid = window.roamAlphaAPI.util.generateUID(), heading, viewType, textAlign, open = true, props, }, parentUid, order = 0, }) => {
    return [
        {
            location: { "parent-uid": parentUid, order },
            block: {
                uid,
                string: text,
                heading,
                "text-align": textAlign,
                "children-view-type": viewType,
                open,
                props,
            },
        },
        ...children.flatMap((node, order) => (0, exports.gatherActions)({ node, parentUid: uid, order })),
    ];
};
exports.gatherActions = gatherActions;
const createBlock = (params) => {
    const actions = (0, exports.gatherActions)(params);
    return (0, submitActions_1.default)(actions.map((params) => ({ params, type: "createBlock" }))).then(() => { var _a; return ((_a = actions[0].block) === null || _a === void 0 ? void 0 : _a.uid) || ""; });
};
exports.default = createBlock;
//# sourceMappingURL=createBlock.js.map
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const env_1 = require("./env");
const handleFetch_1 = tslib_1.__importDefault(require("./handleFetch"));
const handleUrlFetch = (method) => (args, _data) => {
    const _a = typeof args === "string" ? { path: args, data: _data } : args, { data = {} } = _a, fetchArgs = tslib_1.__rest(_a, ["data"]);
    return (0, handleFetch_1.default)((url, init) => {
        if ((0, env_1.getNodeEnv)() === "development") {
            url.searchParams.set("dev", "true");
        }
        Object.entries(data).forEach(([k, v]) => url.searchParams.set(k, v));
        return [
            url,
            Object.assign(Object.assign({}, init), { method }),
        ];
    }, fetchArgs);
};
exports.default = handleUrlFetch;
//# sourceMappingURL=handleUrlFetch.js.map
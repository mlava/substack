"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const getBasicTreeByParentUid_1 = tslib_1.__importDefault(require("../queries/getBasicTreeByParentUid"));
const createBlock_1 = tslib_1.__importDefault(require("../writes/createBlock"));
const toFlexRegex_1 = tslib_1.__importDefault(require("./toFlexRegex"));
const addInputSetting = ({ blockUid, value, key, index = 0, }) => {
    const tree = (0, getBasicTreeByParentUid_1.default)(blockUid);
    const keyNode = tree.find((t) => (0, toFlexRegex_1.default)(key).test(t.text));
    if (keyNode) {
        return (0, createBlock_1.default)({
            node: { text: value },
            order: keyNode.children.length,
            parentUid: keyNode.uid,
        });
    }
    else {
        return (0, createBlock_1.default)({
            parentUid: blockUid,
            order: index,
            node: { text: key, children: [{ text: value }] },
        });
    }
};
exports.default = addInputSetting;
//# sourceMappingURL=addInputSetting.js.map
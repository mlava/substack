"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
let unload;
const registerSmartBlocksCommand = (args) => {
    var _a;
    const register = () => {
        var _a;
        if ((_a = window.roamjs) === null || _a === void 0 ? void 0 : _a.extension.smartblocks) {
            window.roamjs.extension.smartblocks.registerCommand(args);
            unload = () => { var _a; return (_a = window.roamjs.extension.smartblocks) === null || _a === void 0 ? void 0 : _a.unregisterCommand(args.text); };
        }
    };
    if ((_a = window.roamjs) === null || _a === void 0 ? void 0 : _a.loaded.has("smartblocks")) {
        register();
    }
    else {
        document.body.addEventListener(`roamjs:smartblocks:loaded`, register);
    }
    return () => {
        unload === null || unload === void 0 ? void 0 : unload();
    };
};
exports.default = registerSmartBlocksCommand;
//# sourceMappingURL=registerSmartBlocksCommand.js.map
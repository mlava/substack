{"version":3,"file":"registerSmartBlocksCommand.js","sourceRoot":"","sources":["../../src/util/registerSmartBlocksCommand.ts"],"names":[],"mappings":";;AAEA,IAAI,MAAkB,CAAC;AAEvB,MAAM,0BAA0B,GAAoB,CAAC,IAAI,EAAE,EAAE;;IAC3D,MAAM,QAAQ,GAAG,GAAG,EAAE;;QACpB,IAAI,MAAA,MAAM,CAAC,MAAM,0CAAE,SAAS,CAAC,WAAW,EAAE;YACxC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YAC1D,MAAM,GAAG,GAAG,EAAE,WACZ,OAAA,MAAA,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,0CAAE,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,EAAA,CAAC;SACrE;IACH,CAAC,CAAC;IACF,IAAI,MAAA,MAAM,CAAC,MAAM,0CAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE;QAC5C,QAAQ,EAAE,CAAC;KACZ;SAAM;QACL,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,2BAA2B,EAAE,QAAQ,CAAC,CAAC;KACvE;IACD,OAAO,GAAG,EAAE;QACV,MAAM,aAAN,MAAM,uBAAN,MAAM,EAAI,CAAC;IACb,CAAC,CAAC;AACJ,CAAC,CAAC;AAEF,kBAAe,0BAA0B,CAAC","sourcesContent":["import { RegisterCommand } from \"../types/smartblocks\";\n\nlet unload: () => void;\n\nconst registerSmartBlocksCommand: RegisterCommand = (args) => {\n  const register = () => {\n    if (window.roamjs?.extension.smartblocks) {\n      window.roamjs.extension.smartblocks.registerCommand(args);\n      unload = () =>\n        window.roamjs.extension.smartblocks?.unregisterCommand(args.text);\n    }\n  };\n  if (window.roamjs?.loaded.has(\"smartblocks\")) {\n    register();\n  } else {\n    document.body.addEventListener(`roamjs:smartblocks:loaded`, register);\n  }\n  return () => {\n    unload?.();\n  };\n};\n\nexport default registerSmartBlocksCommand;\n"]}
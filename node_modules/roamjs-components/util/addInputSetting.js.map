{"version":3,"file":"addInputSetting.js","sourceRoot":"","sources":["../../src/util/addInputSetting.ts"],"names":[],"mappings":";;;AAAA,yGAAyE;AACzE,gFAAgD;AAChD,wEAAwC;AAExC,MAAM,eAAe,GAAG,CAAC,EACvB,QAAQ,EACR,KAAK,EACL,GAAG,EACH,KAAK,GAAG,CAAC,GAMV,EAAmB,EAAE;IACpB,MAAM,IAAI,GAAG,IAAA,iCAAuB,EAAC,QAAQ,CAAC,CAAC;IAC/C,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAA,qBAAW,EAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;IAChE,IAAI,OAAO,EAAE;QACX,OAAO,IAAA,qBAAW,EAAC;YACjB,IAAI,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE;YACrB,KAAK,EAAE,OAAO,CAAC,QAAQ,CAAC,MAAM;YAC9B,SAAS,EAAE,OAAO,CAAC,GAAG;SACvB,CAAC,CAAC;KACJ;SAAM;QACL,OAAO,IAAA,qBAAW,EAAC;YACjB,SAAS,EAAE,QAAQ;YACnB,KAAK,EAAE,KAAK;YACZ,IAAI,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE;SACjD,CAAC,CAAC;KACJ;AACH,CAAC,CAAC;AAEF,kBAAe,eAAe,CAAC","sourcesContent":["import getBasicTreeByParentUid from \"../queries/getBasicTreeByParentUid\";\nimport createBlock from \"../writes/createBlock\";\nimport toFlexRegex from \"./toFlexRegex\";\n\nconst addInputSetting = ({\n  blockUid,\n  value,\n  key,\n  index = 0,\n}: {\n  blockUid: string;\n  value: string;\n  key: string;\n  index?: number;\n}): Promise<string> => {\n  const tree = getBasicTreeByParentUid(blockUid);\n  const keyNode = tree.find((t) => toFlexRegex(key).test(t.text));\n  if (keyNode) {\n    return createBlock({\n      node: { text: value },\n      order: keyNode.children.length,\n      parentUid: keyNode.uid,\n    });\n  } else {\n    return createBlock({\n      parentUid: blockUid,\n      order: index,\n      node: { text: key, children: [{ text: value }] },\n    });\n  }\n};\n\nexport default addInputSetting;\n"]}
{"version":3,"file":"getOauthAccounts.js","sourceRoot":"","sources":["../../src/util/getOauthAccounts.ts"],"names":[],"mappings":";;;AAAA,6GAA6E;AAC7E,qGAAqE;AACrE,gFAAgD;AAChD,kFAAkD;AAClD,wEAAwC;AAExC,MAAM,gBAAgB,GAAG,CAAC,OAAe,EAAY,EAAE;IACrD,MAAM,WAAW,GAAG,IAAA,yBAAe,EAAC,SAAS,OAAO,EAAE,CAAC,CAAC;IACxD,IAAI,WAAW,EAAE;QACf,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAGpC,CAAC;QACJ,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;KACpC;IACD,MAAM,IAAI,GAAG,IAAA,mCAAyB,EACpC,IAAA,+BAAqB,EAAC,IAAA,0BAAgB,EAAC,OAAO,CAAC,CAAC,CACjD,CAAC;IACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAA,qBAAW,EAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IACxE,IAAI,CAAC,IAAI,EAAE;QACT,OAAO,EAAE,CAAC;KACX;IACD,OAAO,IAAA,mCAAyB,EAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AAChE,CAAC,CAAC;AAEF,kBAAe,gBAAgB,CAAC","sourcesContent":["import getShallowTreeByParentUid from \"../queries/getShallowTreeByParentUid\";\nimport getPageUidByPageTitle from \"../queries/getPageUidByPageTitle\";\nimport localStorageGet from \"./localStorageGet\";\nimport toConfigPageName from \"./toConfigPageName\";\nimport toFlexRegex from \"./toFlexRegex\";\n\nconst getOauthAccounts = (service: string): string[] => {\n  const fromStorage = localStorageGet(`oauth-${service}`);\n  if (fromStorage) {\n    const accounts = JSON.parse(fromStorage) as {\n      text: string;\n      data: string;\n    }[];\n    return accounts.map((a) => a.text);\n  }\n  const tree = getShallowTreeByParentUid(\n    getPageUidByPageTitle(toConfigPageName(service))\n  );\n  const node = tree.find((s) => toFlexRegex(\"oauth\").test(s.text.trim()));\n  if (!node) {\n    return [];\n  }\n  return getShallowTreeByParentUid(node.uid).map((t) => t.text);\n};\n\nexport default getOauthAccounts;\n"]}
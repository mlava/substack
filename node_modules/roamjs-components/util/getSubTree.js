"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const getBasicTreeByParentUid_1 = tslib_1.__importDefault(require("../queries/getBasicTreeByParentUid"));
const createBlock_1 = tslib_1.__importDefault(require("../writes/createBlock"));
const toFlexRegex_1 = tslib_1.__importDefault(require("./toFlexRegex"));
const getSubTree = ({ key, parentUid, order = 0, tree = parentUid ? (0, getBasicTreeByParentUid_1.default)(parentUid) : [], }) => {
    const node = tree.find((s) => (0, toFlexRegex_1.default)(key).test(s.text.trim()));
    if (node)
        return node;
    const defaultNode = { text: "", children: [] };
    if (parentUid) {
        const uid = window.roamAlphaAPI.util.generateUID();
        (0, createBlock_1.default)({ node: { text: key, uid }, parentUid, order });
        return Object.assign({ uid }, defaultNode);
    }
    return Object.assign({ uid: "" }, defaultNode);
};
exports.default = getSubTree;
//# sourceMappingURL=getSubTree.js.map
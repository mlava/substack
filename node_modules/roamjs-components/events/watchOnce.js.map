{"version":3,"file":"watchOnce.js","sourceRoot":"","sources":["../../src/events/watchOnce.ts"],"names":[],"mappings":";;AAEA,MAAM,SAAS,GAAG,CAChB,WAAmB,EACnB,QAAgB,EAChB,QAAwE,EAClE,EAAE;IACR,MAAM,OAAO,GAAgC,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;QAC7D,IAAI,QAAQ,CAAC,MAAM,EAAE,KAAK,CAAC,EAAE;YAC3B,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;SAC1E;QACD,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;IACF,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;AACxE,CAAC,CAAC;AAEF,kBAAe,SAAS,CAAC","sourcesContent":["import type { AddPullWatch, PullBlock } from \"../types/native\";\n\nconst watchOnce = (\n  pullPattern: string,\n  entityId: string,\n  callback: (before: PullBlock | null, after: PullBlock | null) => boolean\n): void => {\n  const watcher: Parameters<AddPullWatch>[2] = (before, after) => {\n    if (callback(before, after)) {\n      window.roamAlphaAPI.data.removePullWatch(pullPattern, entityId, watcher);\n    }\n    return true;\n  };\n  window.roamAlphaAPI.data.addPullWatch(pullPattern, entityId, watcher);\n};\n\nexport default watchOnce;\n"]}
{"version":3,"file":"OauthPanel.js","sourceRoot":"","sources":["../../src/components/OauthPanel.tsx"],"names":[],"mappings":";;;AAAA,4CAA2C;AAC3C,uDAAwC;AACxC,sFAAsD;AACtD,6DAA0D;AAC1D,4EAAsE;AAEtE,MAAM,UAAU,GAAG,CAAC,OAA6B,EAAE,EAAE;IACnD,MAAM,GAAG,GAAG,SAAS,OAAO,CAAC,OAAO,EAAE,CAAC;IACvC,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,IAAA,gBAAQ,EAEtC,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAE,IAAA,yBAAe,EAAC,GAAG,CAAY,IAAI,IAAI,CAAC,CAAC,CAAC;IAC9D,OAAO,CACL,uCAAK,SAAS,EAAC,qBAAqB,EAAC,KAAK,EAAE,EAAE,QAAQ,EAAE,GAAG,EAAE;QAC3D,8BAAC,uBAAa,kBACZ,QAAQ,QACR,SAAS,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,GAAG,QAAQ,EAAE,GAAG,CAAC,CAAC,EACnD,SAAS,EAAE,EAAE,EACb,QAAQ,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,IACvB,OAAO,EACX;QACD,CAAC,CAAC,QAAQ,CAAC,MAAM,IAAI,CACpB;YACE,sCAAI,SAAS,EAAC,UAAU,eAAc;YACtC,sCAAI,SAAS,EAAC,UAAU,IACrB,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CACrB,sCACE,GAAG,EAAE,GAAG,CAAC,GAAG,EACZ,KAAK,EAAE;oBACL,OAAO,EAAE,MAAM;oBACf,cAAc,EAAE,eAAe;oBAC/B,UAAU,EAAE,QAAQ;oBACpB,SAAS,EAAE,CAAC;iBACb;gBAED,wCAAM,KAAK,EAAE,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAG,GAAG,CAAC,IAAI,CAAQ;gBACjD,8BAAC,aAAM,IACL,IAAI,EAAE,SAAS,EACf,OAAO,EAAE,GAAG,EAAE;wBACZ,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CACtB,IAAA,yBAAe,EAAC,GAAG,CAAW,CAG7B,CAAC;wBACJ,IAAA,iCAAe,EACb,GAAG,EACH,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CACvD,CAAC;wBACF,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oBACzD,CAAC,GACD,CACC,CACN,CAAC,CACC,CACJ,CACJ,CACG,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,UAAU,CAAC,IAAI,GAAG,OAAO,CAAC;AAE1B,kBAAe,UAAU,CAAC","sourcesContent":["import { Button } from \"@blueprintjs/core\";\nimport React, { useState } from \"react\";\nimport localStorageGet from \"../util/localStorageGet\";\nimport { localStorageSet } from \"../util/localStorageSet\";\nimport ExternalLogin, { ExternalLoginOptions } from \"./ExternalLogin\";\n\nconst OauthPanel = (options: ExternalLoginOptions) => {\n  const key = `oauth-${options.service}`;\n  const [accounts, setAccounts] = useState<\n    { text: string; uid: string; data: string }[]\n  >(() => JSON.parse((localStorageGet(key) as string) || \"[]\"));\n  return (\n    <div className=\"flex flex-col gap-1\" style={{ minWidth: 300 }}>\n      <ExternalLogin\n        useLocal\n        onSuccess={(acc) => setAccounts([...accounts, acc])}\n        parentUid={\"\"}\n        loggedIn={!!accounts.length}\n        {...options}\n      />\n      {!!accounts.length && (\n        <>\n          <h5 className=\"margin-0\">Accounts</h5>\n          <ul className=\"margin-0\">\n            {accounts.map((act) => (\n              <li\n                key={act.uid}\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                  marginTop: 8,\n                }}\n              >\n                <span style={{ minWidth: 192 }}>{act.text}</span>\n                <Button\n                  text={\"Log Out\"}\n                  onClick={() => {\n                    const accts = JSON.parse(\n                      localStorageGet(key) as string\n                    ) as {\n                      uid: string;\n                    }[];\n                    localStorageSet(\n                      key,\n                      JSON.stringify(accts.filter((a) => act.uid !== a.uid))\n                    );\n                    setAccounts(accounts.filter((a) => act.uid !== a.uid));\n                  }}\n                />\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n    </div>\n  );\n};\n\nOauthPanel.type = \"oauth\";\n\nexport default OauthPanel;\n"]}
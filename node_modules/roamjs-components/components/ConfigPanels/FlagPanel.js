"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const core_1 = require("@blueprintjs/core");
const react_1 = tslib_1.__importStar(require("react"));
const idToTitle_1 = tslib_1.__importDefault(require("../../util/idToTitle"));
const Description_1 = tslib_1.__importDefault(require("../Description"));
const FlagPanel = ({ title, uid: initialUid, parentUid, order, description, options = {}, }) => {
    const [uid, setUid] = (0, react_1.useState)(initialUid);
    return (react_1.default.createElement(core_1.Checkbox, { checked: !!uid, onChange: (e) => {
            var _a;
            const { checked } = e.target;
            if (checked) {
                const newUid = window.roamAlphaAPI.util.generateUID();
                window.roamAlphaAPI.createBlock({
                    block: { string: title, uid: newUid },
                    location: { order, "parent-uid": parentUid },
                });
                setTimeout(() => setUid(newUid), 1);
            }
            else {
                window.roamAlphaAPI.deleteBlock({ block: { uid } });
                setUid("");
            }
            (_a = options.onChange) === null || _a === void 0 ? void 0 : _a.call(options, checked, e);
        }, labelElement: react_1.default.createElement(react_1.default.Fragment, null,
            (0, idToTitle_1.default)(title),
            react_1.default.createElement(Description_1.default, { description: description })) }));
};
FlagPanel.type = "flag";
exports.default = FlagPanel;
//# sourceMappingURL=FlagPanel.js.map
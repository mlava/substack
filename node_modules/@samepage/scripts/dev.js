"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const esbuild_1 = tslib_1.__importDefault(require("esbuild"));
const compile_1 = tslib_1.__importDefault(require("./internal/compile"));
const dev = (args, kill) => {
    process.env.NODE_ENV = process.env.NODE_ENV || "development";
    process.env.AWS_ENDPOINT =
        process.env.AWS_ENDPOINT || "http://localhost:3003/mocks/aws";
    process.env.ORIGIN = process.env.ORIGIN || "http://localhost:3000";
    return new Promise((resolve) => {
        (0, compile_1.default)({
            opts: args,
            builder: (opts) => esbuild_1.default.context(opts).then((esb) => esb.watch()),
        });
        if (kill)
            kill.switch = () => resolve(0);
        process.on("exit", resolve);
    });
};
exports.default = dev;
//# sourceMappingURL=dev.js.map